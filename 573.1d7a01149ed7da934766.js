"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[573],{80573:(e,t,n)=>{n.r(t),n.d(t,{ChatRoom:()=>T,default:()=>V});var r=n(93981),o=n(82140),a=n(48418),i=n(74009),l=n(95007),c=n.n(l),s=n(825),u=n.n(s),d=n(72906),f=n.n(d),p=n(49443),m=n.n(p),h=n(8763),g=n.n(h),b=n(12264),v=n.n(b),y=n(78844),x={};x.styleTagTransform=v(),x.setAttributes=m(),x.insert=f().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=g();c()(y.Z,x);const w=y.Z&&y.Z.locals?y.Z.locals:void 0;function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,n(48933).Z)((function(e,t){a.dB.broadcast.message(e,t)}),300),k=function(e){var t=e.inputRef,n=e.closeChatRoom,i=E((0,r.useState)(""),2),l=i[0],c=i[1],s=E((0,r.useState)("ROOM"),2),u=s[0],d=s[1],f=E((0,r.useState)([]),2),p=f[0],m=f[1],h=E((0,r.useState)([]),2),g=h[0],b=h[1],v=E((0,r.useState)(-1),2),y=v[0],x=v[1],M=(0,o.v9)((function(e){return"in-game"===e.mainMenu.room.state})),k=M?["ROOM","GAME"]:["ROOM"];(0,r.useEffect)((function(){d(M?"GAME":"ROOM")}),[M]),(0,r.useEffect)((function(){if(0===l.length)return m([]),b([]),void x(-1);if("/"===l[0]){var e=a.x8.autocomplete(l),t=e.filter((function(e){return!e.passive})),n=e.filter((function(e){return e.passive}));m(t),b(n),x(t.length>0?0:-1)}}),[l]),(0,r.useEffect)((function(){t.current&&(t.current.style.height="auto",t.current.style.height=Math.max(Math.min(t.current.scrollHeight,200),15)+"px")}),[l,t]);var I=function(){d((function(e){var t=k.indexOf(e);return k[(t+1)%k.length]}))},C=function(e){if(p[e]){var t=l.split(" "),n=l.startsWith("/");t[t.length-1]=p[e].value;var r=t.join(" ");c(n?"/"+r.replace(/^\/+/,""):r),m([]),b([]),x(-1)}},A="/"===l[0],R=k.length>1?"PRESS TAB TO CHANGE CHANNEL":"",F=E(function(){var e=l.split(" "),t=e[e.length-1];if(0===t.length&&g.length>0)return[g[0].value,g[0].color];if(-1===y||0===p.length)return["","#ffffff"];var n=p[y].value;return n.startsWith(t)?[n.slice(t.length),p[y].color]:""}(),2),D=F[0],N=F[1];return r.createElement(r.Fragment,null,r.createElement("div",{className:"".concat(w.input," ").concat(A?w.CMD:w[u])},r.createElement("div",{className:w.background}),r.createElement("span",{className:"".concat(w.msgType," ").concat(w[u]),onClick:I},"[".concat(u,"]")),r.createElement("div",{className:w.inputWrapper},r.createElement("textarea",{value:l,ref:t,placeholder:R,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){if("Enter"===e.key)e.preventDefault(),0===l.length?setTimeout((function(){n()}),200):-1!==y?C(y):0!==l.length&&("/"===l[0]?a.x8.execute(l):S(u,l),c(""),m([]),b([]),x(-1));else if("Tab"===e.key)e.preventDefault(),-1!==y?C(y):I();else if("ArrowRight"===e.key&&-1!==y)e.preventDefault(),C(y);else if("ArrowDown"===e.key)if(e.preventDefault(),-1===y){var t=a.x8.history.getNext();null!==t&&c(t)}else x((function(e){return-1===e?0:(e+1)%p.length}));else if("ArrowUp"===e.key)if(e.preventDefault(),-1===y){var r=a.x8.history.getPrevious();null!==r&&c(r)}else x((function(e){return-1===e?p.length-1:(e-1+p.length)%p.length}))},rows:1,spellCheck:!A}),r.createElement("div",{className:w.suggestionOverlay},l,r.createElement("span",{style:{color:"".concat(N,"90")}},D)))),r.createElement(O,{items:p,selectedIndex:y,setSelectedIndex:x,onClick:function(e){C(e)}}))},O=function(e){var t=e.items,n=e.selectedIndex,o=e.setSelectedIndex,a=e.onClick;return 0===t.length?null:r.createElement("div",{className:w.autocompleteSelect},r.createElement("ul",null,t.map((function(e,t){return r.createElement("li",{className:n===t?w.selected:"",onMouseEnter:function(){return o(t)},onClick:function(){return a(t)},style:{color:e.color}},e.value)}))))};function I(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t=e.messages,n=e.visible,o=e.openChatRoom,a=C((0,r.useState)([]),2),i=a[0],l=a[1];return(0,r.useEffect)((function(){n&&l([])}),[n]),(0,r.useEffect)((function(){0!==t.length&&(l((function(e){var n=[].concat(I(e),[t[t.length-1]]);return n.length>3&&n.shift(),n})),setTimeout((function(){l((function(e){var t=I(e);return t.shift(),t}))}),6e3))}),[t]),r.createElement("div",{className:"".concat(w.preview," ").concat(i.length>0&&n?w.visible:""),onClick:function(){return o()}},i.map((function(e,t){return"LOG"===e.type||"CMD"===e.type?r.createElement("div",{key:t,className:"".concat(w.message," ").concat(w[e.type])},e.message):"GAME"===e.type||"ROOM"===e.type||"SERVER"===e.type?r.createElement("div",{key:t,className:"".concat(w.message," ").concat(w[e.type])},r.createElement("span",{className:w.bold},"".concat(e.name,":")),e.message):void 0})))},D=n(13268);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var T=function(){if(D.Em||!D.jU)return null;var e=(0,o.v9)((function(e){return e.global.scene})),t=(0,r.useRef)(null),n=(0,r.useRef)(null),l=(0,r.useRef)(null),c=N((0,r.useState)(!1),2),s=c[0],u=c[1],d=(0,o.v9)((function(e){return e.global.messages})),f=function(){u(!0),a.qH.deferInput=!0,l.current&&(l.current.disabled=!1,l.current.focus())},p=function(){u(!1),a.qH.deferInput=!1,l.current&&(l.current.disabled=!0)};return(0,r.useEffect)((function(){var e=function(e){if(s)"Escape"===e.code&&(e.stopPropagation(),e.stopImmediatePropagation(),p());else if(e.code===a.Xd.controls.keyBinds[i.JL.CHAT][0]||e.code===a.Xd.controls.keyBinds[i.JL.CHAT][1]){if(a.qH.isFocused())return;e.preventDefault(),f()}},n=function(e){s&&t.current&&!t.current.contains(e.target)&&p()};return document.addEventListener("keyup",e),document.addEventListener("click",n),function(){document.removeEventListener("keyup",e),document.removeEventListener("click",n)}}),[s]),(0,r.useEffect)((function(){var e=d[d.length-1],t=n.current;e&&t&&(t.scrollTop=t.scrollHeight-t.clientHeight)}),[d]),"EDITOR"===e?null:r.createElement(r.Fragment,null,r.createElement(F,{messages:d,openChatRoom:f,visible:!s}),r.createElement("div",{className:"".concat(w.chatroom," ").concat(s?w.visible:""),ref:t,style:{bottom:"MAIN-MENU"===e?300:250}},r.createElement("div",{className:w.messages,ref:n},d.map((function(e,t){return"LOG"===e.type||"CMD"===e.type?r.createElement("pre",{key:t,className:"".concat(w.message," ").concat(w[e.type])},e.message):"GAME"===e.type||"ROOM"===e.type||"SERVER"===e.type?r.createElement("div",{key:t,className:"".concat(w.message," ").concat(w[e.type])},r.createElement("span",{className:w.bold},"".concat(e.name,":")),e.message):void 0}))),r.createElement(k,{inputRef:l,closeChatRoom:p})))};const V=T},78844:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(7306),o=n.n(r),a=n(96633),i=n.n(a)()(o());i.push([e.id,".IE8xm2K7ViFeD_WvMrnS{position:absolute;left:50%;transform:translateX(-50%);top:100px;height:250px;width:650px;border-radius:4px;font-family:monospace,monospace;opacity:0;transition:opacity .1s;border:1px solid #838383;font-size:16px;background-color:rgba(43,43,43,.9098039216);z-index:-1;display:flex;flex-direction:column;justify-content:flex-end}.IE8xm2K7ViFeD_WvMrnS.iO1c8eqzHawn5NCuTdlg{opacity:1;z-index:2}.IE8xm2K7ViFeD_WvMrnS .e4UFiMw5p3edQ91nBPqO{position:absolute;height:auto;max-height:100%;width:100%;overflow-y:auto;overflow-x:hidden}.IE8xm2K7ViFeD_WvMrnS .e4UFiMw5p3edQ91nBPqO::-webkit-scrollbar{width:10px}.IE8xm2K7ViFeD_WvMrnS .e4UFiMw5p3edQ91nBPqO::-webkit-scrollbar-track{background:#3b3b3b;border-top-right-radius:4px;border-bottom-right-radius:4px;border-left:1px solid #c2c2c2;overflow:hidden}.IE8xm2K7ViFeD_WvMrnS .e4UFiMw5p3edQ91nBPqO::-webkit-scrollbar-thumb{background:#919191;border-top-right-radius:3px;border-bottom-right-radius:3px;border-left:1px solid #c2c2c2}.IE8xm2K7ViFeD_WvMrnS .e4UFiMw5p3edQ91nBPqO::-webkit-scrollbar-thumb:hover{background:#848484}.IE8xm2K7ViFeD_WvMrnS .kO2hQhIC_zVnHFGMnsU9{position:absolute;display:flex;top:calc(100% + 10px);min-height:35px;height:fit-content;width:100%;left:-1px;border-radius:4px;border:1px solid #838383}.IE8xm2K7ViFeD_WvMrnS .kO2hQhIC_zVnHFGMnsU9 .n2B20vvCTgPMdWrbgW9S{width:100%;height:100%;position:absolute;background-color:rgba(43,43,43,.9098039216);border-radius:4px;z-index:-1}.IE8xm2K7ViFeD_WvMrnS .kO2hQhIC_zVnHFGMnsU9 .t4aoi2e2S7UgMhsS5QzT{font-weight:800;margin:6px 8px 0 10px}.IE8xm2K7ViFeD_WvMrnS .kO2hQhIC_zVnHFGMnsU9 textarea{background-color:none;border:none;outline:none;resize:none;overflow:hidden;flex:1;width:calc(100% - 8px);background:none;color:inherit;font-size:inherit;font-family:monospace,monospace;margin-top:6px;white-space:pre-wrap;word-break:break-word;box-sizing:border-box;min-height:25px}.vhYZ409e0G3U0d0H_Fq5{display:flex;flex-direction:row;justify-content:left;align-items:center;padding:0 10px;margin:4px 0;border-radius:5px;width:100%;overflow-wrap:break-word;word-wrap:break-word;hyphens:auto;white-space:normal}.vhYZ409e0G3U0d0H_Fq5:nth-last-child(1){margin-bottom:20px}.vhYZ409e0G3U0d0H_Fq5:nth-child(1){margin-top:20px}.vhYZ409e0G3U0d0H_Fq5 .RSJlTsQscAKVGCgoA_Ot{margin-right:8px;font-weight:800;white-space:nowrap}.hJz5TvsO0Hd5uoayzNwB{position:absolute;left:100px;bottom:230px;width:450px;height:auto;max-height:300px;background-color:rgba(43,43,43,.9098039216);font-family:monospace,monospace;border-radius:4px;transition:.1s;opacity:0;pointer-events:none;cursor:default;visibility:hidden;z-index:1;overflow-wrap:break-word;word-wrap:break-word;hyphens:auto;white-space:normal}.hJz5TvsO0Hd5uoayzNwB.iO1c8eqzHawn5NCuTdlg{cursor:pointer;opacity:1;visibility:unset;pointer-events:auto}.cVTu0ArPUXq_hn3k4Gdl{color:#22c622}.DXIdUKb9uyC1Z1KpBT33{color:#b079f0}.Y0sC_s2_N6v4Nzen5icz{color:#7897e6}.rHiy7QEqBMJbKDoKMgTd{color:#ebebeb;white-space:pre}.OzZDvjC8OGdfCS52RCga{color:#9c9c9c;white-space:pre}.PacMxI1dxMexRSfeLgRi{background-color:rgba(43,43,43,.9098039216);border:1px solid #838383;border-radius:6px;width:fit-content;min-width:100px;position:absolute;top:calc(100% + 55px);left:70px}.PacMxI1dxMexRSfeLgRi ul{list-style-type:none;margin:0;padding:0;background:none;border:none;padding:4px 0}.PacMxI1dxMexRSfeLgRi li{color:#bebebe;padding:2px 5px;cursor:pointer}.PacMxI1dxMexRSfeLgRi li.XQhFr14VDAPovw5N6NKo{background-color:#3b3b3b}.cdI275hF7SoVE0kDazrK{position:relative;width:100%}.cdI275hF7SoVE0kDazrK .isyVm5XPVRQ9yrliJI3F{position:absolute;top:0;left:0;width:calc(100% - 8px);z-index:1;pointer-events:none;display:flex;align-items:flex-start;margin-top:6px;color:rgba(0,0,0,0);white-space:pre-wrap;word-break:break-word;overflow:hidden;box-sizing:border-box}",""]),i.locals={chatroom:"IE8xm2K7ViFeD_WvMrnS",visible:"iO1c8eqzHawn5NCuTdlg",messages:"e4UFiMw5p3edQ91nBPqO",input:"kO2hQhIC_zVnHFGMnsU9",background:"n2B20vvCTgPMdWrbgW9S",msgType:"t4aoi2e2S7UgMhsS5QzT",message:"vhYZ409e0G3U0d0H_Fq5",bold:"RSJlTsQscAKVGCgoA_Ot",preview:"hJz5TvsO0Hd5uoayzNwB",ROOM:"cVTu0ArPUXq_hn3k4Gdl",GAME:"DXIdUKb9uyC1Z1KpBT33",SERVER:"Y0sC_s2_N6v4Nzen5icz",CMD:"rHiy7QEqBMJbKDoKMgTd",LOG:"OzZDvjC8OGdfCS52RCga",autocompleteSelect:"PacMxI1dxMexRSfeLgRi",selected:"XQhFr14VDAPovw5N6NKo",inputWrapper:"cdI275hF7SoVE0kDazrK",suggestionOverlay:"isyVm5XPVRQ9yrliJI3F"};const l=i}}]);